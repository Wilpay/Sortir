{% extends('base.html.twig') %}
{% block title %}{{ parent() }} | Sortie{% endblock %}
{% block body %}
    <script src="{{ asset("js/creerSorti.js") }}"></script>
    <h1 class="display-4">CRÉER UNE SORTIE</h1>
    <hr class="my-3">
    <input type="hidden" id="urlLieu" value="{{ path("majLieux") }}">
    <input type="hidden" id="urlInfoLieu" value="{{ path("majInfoLieu") }}">

    <input type="hidden" id="idLieu" value="{{ idLieu }}">
    <input type="hidden" id="idVille" value="{{ idVille }}">


    <div class="container">
        {% for label, messages in app.flashes %}
            <div class="alert alert-{{ label }}" role="alert">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endfor %}

        {{ form_start(form) }}
        {{ form_errors(form) }}

        <input type="hidden" id="typeSub" name="typeSub" value="Créée"/>
        <div class="row">
            <div class="col-12 col-lg-6">
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Nom de la sortie:</div>
                    <div class="col-12 col-md-8">
                        {{ form_widget(form.nom) }}
                        {{ form_errors(form.nom) }}
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Date et heure de la sortie:</div>
                    <div class="col-12 col-md-8">
                        {{ form_widget(form.dateHeureDebut) }}
                        {{ form_errors(form.dateHeureDebut) }}
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Date limite d'inscription:</div>
                    <div class="col-12 col-md-8">
                        {{ form_widget(form.dateLimiteInscription) }}
                        {{ form_errors(form.dateLimiteInscription) }}
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Nombre de places:</div>
                    <div class="col-12 col-md-8">
                        {{ form_widget(form.nbInscriptionsMax) }}
                        {{ form_errors(form.nbInscriptionsMax) }}
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Durée:</div>
                    <div class="col-12 col-md-8">
                        <div class="input-group">
                            {{ form_widget(form.duree) }}
                            <div class="input-group-append">
                                <span class="input-group-text">minutes</span>
                            </div>
                        </div>
                        {{ form_errors(form.duree) }}
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 mt-1">Description et infos:</div>
                    <div class="col-12 col-md-8">
                        {{ form_widget(form.infosSortie) }}
                        {{ form_errors(form.infosSortie) }}
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="row mb-2">
                    <div class="font-weight-bold col-4">Ville organisatrice:</div>
                    <div class="col-8">
                        <label class="mb-0">{{ villeOrga.nom }}</label>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="font-weight-bold col-12 col-md-4 m-auto">Ville:</div>
                    <div class="col-12 col-md-8">
                        <select id="ville" class="form-control">
                            {% for ville in villes %}
                                <option value="{{ ville.id }}">{{ ville.nom }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div id="lieu"></div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-12 col-sm-6 col-md-4 mb-3">
                <button type="submit" class="btn btn-block btn-success font-weight-bold">Enregistrer</button>
            </div>
            <div class="col-12 col-sm-6 col-md-4 mb-3">
                <button class="btn btn-block btn-info font-weight-bold" id="publi">Publier la sortie</button>
            </div>
            <div class="col-12 col-md-4 mb-3">
                <a href="{{ path('home') }}" class="btn btn-block btn-danger font-weight-bold">Annuler</a>
            </div>
        </div>

        {{ form_end(form) }}
    </div>
{% endblock %}