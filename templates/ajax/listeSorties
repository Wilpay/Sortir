<table class="table table-sm">
    <thead class="thead-dark">
    <tr>
        <th scope="col">Nom de la sortie</th>
        <th scope="col">Date de la sortie</th>
        <th scope="col">Clôture</th>
        <th scope="col">Inscrits / Places</th>
        <th scope="col">Etat</th>
        <th scope="col">Inscrit</th>
        <th scope="col">Organisateur</th>
        <th scope="col">Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for sortie in sorties %}
        <tr>
            <th scope="row">{{ sortie.nom }}</th>
            <td>{{ sortie.dateHeureDebut|date('Y-m-d H:i:s') }}</td>
            <td>{{ sortie.dateLimiteInscription|date('Y-m-d H:i:s') }}</td>
            <td>{{ sortie.inscrit.count }} / {{ sortie.nbInscriptionsMax }}</td>
            <td>{{ sortie.etat.libelle }}</td>
            <td>
                {% if app.user %}
                    {% if app.user == sortie.inscrit.contains(app.user) %}
                        <i class="fas fa-check"></i>
                    {% endif %}
                {% endif %}
            </td>
            <td><a href="{{ path('profil_user', {id:sortie.organisateur.id}) }}">{{ sortie.organisateur.nom }}</td>
            <td>
                {% if app.user %}
                    {% if app.user != sortie.inscrit.contains(app.user)  and sortie.etat.libelle == 'Ouverte' and app.user != sortie.organisateur %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                        {% if sortie.inscrit.count == sortie.nbInscriptionsMax %}

                        {% else %}
                            <a href="{{ path('inscrire', {id:sortie.id}) }}" ><i class="fas fa-plus pr-3"></i></a>
                        {% endif %}
                    {% elseif app.user == sortie.inscrit.contains(app.user) and sortie.etat.libelle == 'Ouverte' %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                        <a href="{{ path('desinscrire', {id:sortie.id}) }}" ><i class="fas fa-user-minus pr-3"></i></a>
                    {% elseif app.user != sortie.inscrit.contains(app.user) and sortie.etat.libelle == 'Clôturée' %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                    {% elseif app.user == sortie.organisateur and sortie.etat.libelle == 'Créée' %}
                        <i class="fas fa-tools pr-3"></i>
                        <a href="{{ path('publier', {id:sortie.id}) }}" ><i class="fas fa-upload pr-3"></i></a>
                    {% elseif app.user == sortie.organisateur and sortie.etat.libelle == 'Ouverte' %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                        <a href="{{ path('annuler', {id:sortie.id}) }}" ><i class="fas fa-trash-alt pr-3"></i></a>
                    {% elseif app.user != sortie.inscrit.contains(app.user) and sortie.inscrit.count == sortie.nbInscriptionsMax %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                    {% elseif app.user != sortie.inscrit.contains(app.user) and sortie.etat.libelle == 'Clôturée' %}
                        <a href="{{ path('sortie', {id:sortie.id}) }}"><i class="far fa-eye pr-3"></i></a>
                    {% endif %}
                {% endif %}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>